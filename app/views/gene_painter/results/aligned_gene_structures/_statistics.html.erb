<%
  stats_path = controller.build_output_path("stats.txt")

  Helper.file_exist_or_die(stats_path)

  # exon-intron pattern
  pattern_data, stats_data = parse_statspattern(stats_path)
  pattern_intronindices_tr = data_to_intronindex_tr(pattern_data)
  pattern_tr = data_to_tr(pattern_data)

  # statistics info
  th_data = [ stats_data.shift ]
  stats_th = data_to_th(th_data)
  stats_tr = data_to_tr(stats_data)

# TODO
# javascript: hover over info-table: remove all classes highlight & highlight all cells with same class -> (use intron indices) 

# 1) nucleotide alignemnt:
# auch tabelle statt div's
# CSS:
# aufraumen

%>

<div class="pattern" id="stats-pattern-div">
  <table id="stats-pattern" class="fixTable unstyled">
    <tbody>
      <%= pattern_tr.html_safe %>
    </tbody>
    <tfoot>
      <%= pattern_intronindices_tr.html_safe %>
    </tfoot>
  </table>
</div>

<div class="large-spacer stats-info" id="stats-info-div">
  <table id="stats-info" class="fixTable">
    <thead>
      <%= stats_th.html_safe %>
    </thead>
    <tbody>
      <%= stats_tr.html_safe %>
    </tbody>
  </table>
</div>

<script type="text/javascript">
  // fix footer and first column
  $(document).ready(function() {
    $("#stats-pattern.fixTable").tableHeadFixer({'foot': true, 'head': false, 'left': 1}); 
    $("#stats-info.fixTable").tableHeadFixer({'foot': false, 'head': true, 'left': 0}); 
  });

</script>