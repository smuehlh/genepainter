<% provide(:title, 'Web Interface') %>
<%= content_tag(:h1, "Web Interface") %>
<%= content_tag(:h2, "Contents") %>

<a name="top" class="anker"></a>
<ul style="padding-left: 5%">
	<li><a class = "internal" href="#general">General</a></li>
	<li><a class = "internal" href="#data_center">Data upload and display in data center</a></li>
	<li><a class = "internal" href="#generate_genestruct">Generating gene structures on the fly</a></li>
	<li><a class = "internal" href="#result_files">Aligned gene structures</a></li>
	<li><a class = "internal" href="#phylo">Phylogenetic Distribution of Intron Positions</a></li>
</ul>

<h2>
	<table width=100% class="unstyled">
		<tr>
			<td align="left"><a name="general" style="font-style: normal">General</a></td>
			<td align="right"><a class="internal" href="#" style="font-size: 12px">Back to top</a></td>
		</tr>
	</table>
</h2>
	<p>
		The web interface makes GenePainter easily accessible. It guides you through data collection process and provides a comprehensive overview of data GenePainter will use.  It does not, however, provide all of the many options GenePainter has to offer.
	</p>

<h2>
	<table width=100% class="unstyled">
		<tr>
			<td align="left"><a name="data_center" style="font-style: normal">Data upload and display in data center</a></td>
			<td align="right"><a class="internal" href="#" style="font-size: 12px">Back to top</a></td>
		</tr>
	</table>
</h2>
	<p>
		Data upload starts with the input or upload of a multiple sequence protein alignment. Upon that, all other file upload handlers will be enabled. 
	</p>
	<p>
		FASTA headers are listed as &quot;Gene names&quot; in Data Center. All uploaded data will be associated with the gene names and displayed in Data Center. For the gene structures, the association will be drawn based on file names of uploaded gene structure files. Species names are linked to gene names either manually or through the uploaded map.
	</p>
	<p>
		The submit-button starts the analysis. If necessary, missing gene structures will be generated. After that, GenePainter is executed. Since GenePainter requires an alignment and gene structures as input, the submit button is disabled until input is provided. 
	</p>
	<p>
		GenePainter will analyse all genes with an aligned sequence and a gene structure. In order to exclude some genes from the analysis, please deselect the corresponding &quot;Analyse&quot; checkbox. 
	</p>

<h2>
	<table width=100% class="unstyled">
		<tr>
			<td align="left"><a name="generate_genestruct" style="font-style: normal">Generating gene structures on the fly</a></td>
			<td align="right"><a class="internal" href="#" style="font-size: 12px">Back to top</a></td>
		</tr>
	</table>
</h2>
	<p>An alternative to gene structure upload is the generation of gene structures before the actual GenePainter execution. To this end, you need to provide a species mapping and select the &quot;Generate gene structure&quot; checkbox for each gene for which the gene structure should be generated.
	</p>
	<p>
		We discourage the use of this feature, however. Reasons are, that GenePainter itself is reasonably fast. The generation of gene structures through WebScipio API will slow the analysis remarkably down. The WebScipio web interface on the other hand is faster than the API. Thus, if you generate gene structures yourself and uploading the, you will benefit from: 
		<ul style="padding-left: 5%">
			<li>The full range of options Scipio has to offer (the API will be queried using default parameters)</li>
			<li>A fast and convenient way to generate, view and download your gene structures</li>
		</ul>
	</p>

<h2>
	<table width=100% class="unstyled">
		<tr>
			<td align="left"><a name="result_files" style="font-style: normal">Aligned gene structures</a></td>
			<td align="right"><a class="internal" href="#" style="font-size: 12px">Back to top</a></td>
		</tr>
	</table>
</h2>
	<p>
		GenePainter provides different formats for viewing the aligned gene structures. They are pre-processed and grouped into result tabs.
	</p>
	<h3>Text-based Representation</h3>
	<p>
		The text-based representation of aligned gene structures is the basic output format of GenePainter. A merged pattern, featuring all intron position, is displayed underneath the exon-intron patterns of individual genes. Intron positions in the merged pattern are colored by their conservation. Dark red corresponds to a highly conserved position, dark blue to a weakly conserved position. Coloring can be applied to exon-intron patterns by selecting the &quot;Highlight common introns&quot; checkbox. Selecting the &quot;Highlight unique introns&quot; checkbox colors those intron positions that are unique to a single gene.
	</p> 
	<p>
		The default marker for introns is &quot;|&quot;. Alternatively, a number indicating the intron phase can be used as marker. To this end, select the &quot;Show intron phase&quot; checkbox.
	</p>
	<%= image_tag("help/web_fig1.png", :alt=>"web 1", width: "700px", :class => "img_help") +
		tag(:br, :class => "clearfix")
	 %>
	<p style="font-size: 10px"><b>Figure 1</b> Different options for viewing the text-based representation are marked in red. 1) &quot;Highlight unique introns&quot; checkbox, 2) &quot;Highlight common introns&quot; checkbox with input field to specify the conservation threshold, 3) &quot;Show intron phase&quot; checkbox.
	</p>

	<h3>Alignment</h3>
	<p>
		Intron positions are incorporated into the uploaded multiple sequence alignment. Intron phases are included as additional lines in the alignment. Common alignment gaps are removed. Per drag and drop, you can move to different positions in the alignment.
	</p>
	<h3>Graphical representation</h3>
	<p>
		Two different graphical representations of aligned gene structures exist. In each format, common introns are drawn underneath each other. While exons and introns are both drawn to scale in the standard format, intron length is fixed in the reduced format. You can switch between both formats by selecting „Standard“ or „Focus on common introns“. At most, 20 gene structures can be displayed at a time. 
	</p>
	<%= image_tag("help/web_fig2.png", :alt=>"web 2", width: "700px", :class => "img_help") +
		tag(:br, :class => "clearfix")
	 %>
	<p style="font-size: 10px"><b>Figure 2</b> Different formats for viewing the graphical representation are marked in red. 1) &quot;Standard format&quot; checkbox, 2) &quot;Focus on common introns&quot;, 3) &quot;Select different gene structures for viewing&quot;.
	</p>

	<h3>Statistics</h3>
	<p>
		The total number of introns at each intron position is listed in the statistics. If a mapping of genes to species was provide, the taxonomic distribution of intron positions is also given. This include the last common ancestor of all species harbouring the respective intron as well as the distribution of intron counts onto direct descendants of that last common ancestor.
	</p>

<h2>
	<table width=100% class="unstyled">
		<tr>
			<td align="left"><a name="phylo" style="font-style: normal">Phylogenetic Distribution of Intron Positions</a></td>
			<td align="right"><a class="internal" href="#" style="font-size: 12px">Back to top</a></td>
		</tr>
	</table>
</h2>
	<p>
		Phylogenetic distribution of intron positions can be only displayed if species mapping was provided for at least two analysed species.  
	</p>
	<p> 
		GenePainter plots intron gain and loss events onto the NCBI phylogeny using a maximum parsimony approach. Introns shared by the genes of two species are regarded as already been present in their last common ancestor and are marked as intron gain events there.  If species of sub-branches miss the respective intron, an intron-loss event is marked for this branch.
	</p>
	<p>
		Intron gain and loss events are plotted in green and red, respectively, onto branches. The positions of gained introns can be marked in the &quot;Text-based Representation&quot; and &quot;Graphical Representation&quot; tabs above. To this end, please click respective taxa in the phylogenetic tree. Please note that highlighted intron positions will not be focused automatically and you might need to scroll through text-based or graphical representation to see them.
	</p>
	<%= image_tag("help/results_fig9.png", :alt=>"web 3", width: "700px", :class => "img_help") +
		tag(:br, :class => "clearfix")
	%>
	<p style="font-size: 10px"><b>Figure 3</b> Phylogenetic tree of those branches, at which introns were lost (coloured red) or gained (coloured in green). The numbers displayed behind the species comprise the total number of genes (first number) and intron positions present in these genes (second number).</p>
